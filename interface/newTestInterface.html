<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>

    <div class="container my-5">

        <button class="btn btn-primary" id="btn">Click me</button>
    
    </div>
    
</body>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.6.16/dist/sweetalert2.all.min.js"></script>
<script>

    let shapeColor;
    let shapeType;
    let fillType;
    let fillColor;
    let opacity;
    const INPUT_IMAGE_URL = "./images/telescope.png";


    btn.addEventListener('click', async () => {      
    
        const { value: shape } = await Swal.fire({
            title: 'Выберите фигуру',
            input: 'select',
            inputOptions: {
                'points': 'Точки',
                'lines': 'Линии',
                'rectangle': 'Прямоугольник',
                'sphere': 'Сфера'
            },
            inputPlaceholder: 'Типы фигур',
            allowOutsideClick: false,
            showCancelButton: true
        })
        shapeType = shape;
        console.log('shapeType: ' + shapeType);

        if (shape !== '' && shape !== undefined) {

            const inputOptions = new Promise((resolve) => {
                resolve({
                    '#ff0000': 'Крассный',
                    '#00ff00': 'Зелённый',
                    '#0000ff': 'Синий',
                    'yourColor': 'Свой'
                })
            })

            const { value: color } = await Swal.fire({
                title: 'Выберите цвет',
                input: 'radio',
                inputOptions: inputOptions,
                allowOutsideClick: false,
                inputValidator: (value) => {
                    if (!value) {
                        return 'Выберите что-нибудь!'
                    }
                }
            })
            shapeColor = color
            if (color === 'yourColor') {

                const inputValue = ''

                const { value: yourColor } = await Swal.fire({
                    title: 'Введите ваш цвет фигуры',
                    input: 'text',
                    inputLabel: 'Пример: #000000',
                    inputValue: inputValue,
                    showCancelButton: true,
                    allowOutsideClick: false,
                    inputValidator: (value) => {
                        if (!value) {
                            return 'Введите код цвета!'
                        }
                    }
                })

                if (yourColor) {
                    shapeColor = yourColor;
                }
            }
            console.log('shapeColor: ' + shapeColor);

            const { value: fill } = await Swal.fire({
                title: 'Выберите тип заполнения',
                input: 'select',
                inputOptions: {
                    '-': '-',
                    'solid': 'сплошной',
                    'strokes': 'штрихами',
                    'dots': 'точками'
                },
                inputPlaceholder: 'Типы заполнения',
                allowOutsideClick: false,
                showCancelButton: true
            })
            fillType = fill;
            console.log('fillType: ' + fillType);



            const { value: fcolor } = await Swal.fire({
                title: 'Выберите цвет заполнения',
                input: 'radio',
                inputOptions: inputOptions,
                allowOutsideClick: false,
                inputValidator: (value) => {
                    if (!value) {
                        return 'Выберите что-нибудь!'
                    }
                }
            })
            shapeColor = fcolor
            if (fcolor === 'yourColor') {

                const inputValue = ''

                const { value: yourColor } = await Swal.fire({
                    title: 'Введите ваш цвет',
                    input: 'text',
                    inputLabel: 'Пример: #000000',
                    inputValue: inputValue,
                    showCancelButton: true,
                    allowOutsideClick: false,
                    inputValidator: (value) => {
                        if (!value) {
                            return 'Введите код цвета!'
                        }
                    }
                })

                if (yourColor) {
                    shapeColor = yourColor;
                }
            }

            console.log('shapeColor: ' + shapeColor);

            const { value: opac }  = await Swal.fire({
                title: 'Прозрачность',
                input: 'range',
                inputLabel: 'В процентах',
                inputAttributes: {
                    min: 0,
                    max: 100,
                    step: 1
                },
                inputValue: 50,
                allowOutsideClick: false
            })
            opacity = Number(opac);
            console.log('opacity: ' + opacity);
        }
    });
</script>
</html>
